version: "3"

services:
    memcached:
        image: memcached:latest
        ports:
            - "127.0.0.1:11211:11211"
    redis:
        image: redis:6
        ports:
            - "127.0.0.1:6379:6379"
    redis2:
        image: redis:6
        ports:
            - "127.0.0.1:6378:6379"

    toxicproxy:
        image: ghcr.io/shopify/toxiproxy:latest
        network_mode: host

    beanstalk:
        build:
            context: .
            dockerfile: Dockerfile-beanstalkd.yaml
        ports:
            - "127.0.0.1:11300:11300"

    sqs:
        build:
            context: .
            dockerfile: Dockerfile-elastic-mq.yaml
        ports:
            - "127.0.0.1:9324:9324"

    rabbitmq:
        image: rabbitmq:3-management
        ports:
            - "127.0.0.1:15672:15672"
            - "127.0.0.1:5672:5672"

    prometheus:
        image: prom/prometheus
        ports:
            - "9090:9090"